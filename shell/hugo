# # vim: filetype=zsh

# usage: hugos <theme>

hugos() {
  # kill running hugo if any.
  kill %hugo &>/dev/null

  if [[ "$#" -le 1 ]]; then
    local theme=${1:-"hyde"}
  else
    echo "usage: $0 [theme_name]"
    return
  fi

  # start hugo server
  hugo server --watch --buildDrafts --buildFuture --theme="$theme" -s . &

  # open local pages in browser
  local url='http://localhost:1313'

  local os=$(uname -o)
  case $os in
    "Darwin" )
      open 'http://localhost:1313'
      ;;
    "Cygwin" )
      local firefox='D:/Program Files/Mozilla Firefox/firefox.exe'
      "$firefox" "$url"
      ;;
  esac
}
