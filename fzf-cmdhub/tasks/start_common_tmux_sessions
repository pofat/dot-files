#!/usr/bin/env bash
#x cmdhub: Start commonly used tmux sessions
set -euo pipefail

CLIENT_WIDTH=213
CLIENT_HEIGHT=57

source ~/Git/dot-files/bash/lib/jack

for s in Configure Dashboard Play Xcode; do
  session_file="$HOME/Git/dot-files/tmux/sessions/$s.tmux-session.sh"
  if [[ -f $session_file ]]; then
    jackInfo "\nStarting $s\n"
    bash "$session_file"                \
      && jackVerbose "\nwarming for 1s" \
      && sleep 1
  else
    jackError "Missing session file: $session_file\n"
  fi
done

jackInfo "\nStarting Tmux\n"
tav="${HOME}/Develop/Python/tav/tav.py"
"${tav}" snapshot
tmux new-session      \
  -s Tmux             \
  -n Navigator        \
  -x "$CLIENT_WIDTH"  \
  -y "$CLIENT_HEIGHT" \
  -d                  \
  "${tav}" serve

tmux attach-session -t '@0'
